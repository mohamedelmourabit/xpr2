{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) {\n      if (b.hasOwnProperty(p)) d[p] = b[p];\n    }\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar redux_1 = require(\"redux\");\n\nvar core_1 = require(\"@angular/core\");\n\nvar rxjs_1 = require(\"rxjs\");\n\nvar operators_1 = require(\"rxjs/operators\");\n\nvar ng_redux_1 = require(\"./ng-redux\");\n\nvar selectors_1 = require(\"./selectors\");\n\nvar assert_1 = require(\"../utils/assert\");\n\nvar sub_store_1 = require(\"./sub-store\");\n\nvar fractal_reducer_map_1 = require(\"./fractal-reducer-map\");\n/** @hidden */\n\n\nvar RootStore =\n/** @class */\nfunction (_super) {\n  __extends(RootStore, _super);\n\n  function RootStore(ngZone) {\n    var _this = _super.call(this) || this;\n\n    _this.ngZone = ngZone;\n    _this._store = undefined;\n\n    _this.configureStore = function (rootReducer, initState, middleware, enhancers) {\n      if (middleware === void 0) {\n        middleware = [];\n      }\n\n      if (enhancers === void 0) {\n        enhancers = [];\n      }\n\n      assert_1.assert(!_this._store, 'Store already configured!'); // Variable-arity compose in typescript FTW.\n\n      _this.setStore(redux_1.compose.apply(null, [redux_1.applyMiddleware.apply(void 0, middleware)].concat(enhancers))(redux_1.createStore)(fractal_reducer_map_1.enableFractalReducers(rootReducer), initState));\n    };\n\n    _this.provideStore = function (store) {\n      assert_1.assert(!_this._store, 'Store already configured!');\n\n      _this.setStore(store);\n    };\n\n    _this.getState = function () {\n      return _this._store.getState();\n    };\n\n    _this.subscribe = function (listener) {\n      return _this._store.subscribe(listener);\n    };\n\n    _this.replaceReducer = function (nextReducer) {\n      _this._store.replaceReducer(nextReducer);\n    };\n\n    _this.dispatch = function (action) {\n      assert_1.assert(!!_this._store, 'Dispatch failed: did you forget to configure your store? ' + 'https://github.com/angular-redux/@angular-redux/core/blob/master/' + 'README.md#quick-start');\n\n      if (!core_1.NgZone.isInAngularZone()) {\n        return _this.ngZone.run(function () {\n          return _this._store.dispatch(action);\n        });\n      } else {\n        return _this._store.dispatch(action);\n      }\n    };\n\n    _this.select = function (selector, comparator) {\n      return _this._store$.pipe(operators_1.distinctUntilChanged(), operators_1.map(selectors_1.resolveToFunctionSelector(selector)), operators_1.distinctUntilChanged(comparator));\n    };\n\n    _this.configureSubStore = function (basePath, localReducer) {\n      return new sub_store_1.SubStore(_this, basePath, localReducer);\n    };\n\n    _this.storeToObservable = function (store) {\n      return new rxjs_1.Observable(function (observer) {\n        observer.next(store.getState());\n        var unsubscribeFromRedux = store.subscribe(function () {\n          return observer.next(store.getState());\n        });\n        return function () {\n          unsubscribeFromRedux();\n          observer.complete();\n        };\n      });\n    };\n\n    ng_redux_1.NgRedux.instance = _this;\n    _this._store$ = new rxjs_1.BehaviorSubject(undefined).pipe(operators_1.filter(function (n) {\n      return n !== undefined;\n    }), operators_1.switchMap(function (observableStore) {\n      return observableStore;\n    }) // TODO: fix this? needing to explicitly cast this is wrong\n    );\n    return _this;\n  }\n\n  RootStore.prototype.setStore = function (store) {\n    this._store = store;\n    var storeServable = this.storeToObservable(store);\n\n    this._store$.next(storeServable);\n  };\n\n  return RootStore;\n}(ng_redux_1.NgRedux);\n\nexports.RootStore = RootStore; //# sourceMappingURL=root-store.js.map","map":{"version":3,"sources":["/Users/mohammedelmourabit/xrp/xpr/node_modules/@angular-redux/store/__ivy_ngcc__/lib/src/components/root-store.js"],"names":["__extends","extendStatics","Object","setPrototypeOf","__proto__","Array","d","b","p","hasOwnProperty","__","constructor","prototype","create","defineProperty","exports","value","redux_1","require","core_1","rxjs_1","operators_1","ng_redux_1","selectors_1","assert_1","sub_store_1","fractal_reducer_map_1","RootStore","_super","ngZone","_this","call","_store","undefined","configureStore","rootReducer","initState","middleware","enhancers","assert","setStore","compose","apply","applyMiddleware","concat","createStore","enableFractalReducers","provideStore","store","getState","subscribe","listener","replaceReducer","nextReducer","dispatch","action","NgZone","isInAngularZone","run","select","selector","comparator","_store$","pipe","distinctUntilChanged","map","resolveToFunctionSelector","configureSubStore","basePath","localReducer","SubStore","storeToObservable","Observable","observer","next","unsubscribeFromRedux","complete","NgRedux","instance","BehaviorSubject","filter","n","switchMap","observableStore","storeServable"],"mappings":"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","sourcesContent":["\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar redux_1 = require(\"redux\");\nvar core_1 = require(\"@angular/core\");\nvar rxjs_1 = require(\"rxjs\");\nvar operators_1 = require(\"rxjs/operators\");\nvar ng_redux_1 = require(\"./ng-redux\");\nvar selectors_1 = require(\"./selectors\");\nvar assert_1 = require(\"../utils/assert\");\nvar sub_store_1 = require(\"./sub-store\");\nvar fractal_reducer_map_1 = require(\"./fractal-reducer-map\");\n/** @hidden */\nvar RootStore = /** @class */ (function (_super) {\n    __extends(RootStore, _super);\n    function RootStore(ngZone) {\n        var _this = _super.call(this) || this;\n        _this.ngZone = ngZone;\n        _this._store = undefined;\n        _this.configureStore = function (rootReducer, initState, middleware, enhancers) {\n            if (middleware === void 0) { middleware = []; }\n            if (enhancers === void 0) { enhancers = []; }\n            assert_1.assert(!_this._store, 'Store already configured!');\n            // Variable-arity compose in typescript FTW.\n            _this.setStore(redux_1.compose.apply(null, [redux_1.applyMiddleware.apply(void 0, middleware)].concat(enhancers))(redux_1.createStore)(fractal_reducer_map_1.enableFractalReducers(rootReducer), initState));\n        };\n        _this.provideStore = function (store) {\n            assert_1.assert(!_this._store, 'Store already configured!');\n            _this.setStore(store);\n        };\n        _this.getState = function () { return _this._store.getState(); };\n        _this.subscribe = function (listener) {\n            return _this._store.subscribe(listener);\n        };\n        _this.replaceReducer = function (nextReducer) {\n            _this._store.replaceReducer(nextReducer);\n        };\n        _this.dispatch = function (action) {\n            assert_1.assert(!!_this._store, 'Dispatch failed: did you forget to configure your store? ' +\n                'https://github.com/angular-redux/@angular-redux/core/blob/master/' +\n                'README.md#quick-start');\n            if (!core_1.NgZone.isInAngularZone()) {\n                return _this.ngZone.run(function () { return _this._store.dispatch(action); });\n            }\n            else {\n                return _this._store.dispatch(action);\n            }\n        };\n        _this.select = function (selector, comparator) {\n            return _this._store$.pipe(operators_1.distinctUntilChanged(), operators_1.map(selectors_1.resolveToFunctionSelector(selector)), operators_1.distinctUntilChanged(comparator));\n        };\n        _this.configureSubStore = function (basePath, localReducer) {\n            return new sub_store_1.SubStore(_this, basePath, localReducer);\n        };\n        _this.storeToObservable = function (store) {\n            return new rxjs_1.Observable(function (observer) {\n                observer.next(store.getState());\n                var unsubscribeFromRedux = store.subscribe(function () {\n                    return observer.next(store.getState());\n                });\n                return function () {\n                    unsubscribeFromRedux();\n                    observer.complete();\n                };\n            });\n        };\n        ng_redux_1.NgRedux.instance = _this;\n        _this._store$ = new rxjs_1.BehaviorSubject(undefined).pipe(operators_1.filter(function (n) { return n !== undefined; }), operators_1.switchMap(function (observableStore) { return observableStore; })\n        // TODO: fix this? needing to explicitly cast this is wrong\n        );\n        return _this;\n    }\n    RootStore.prototype.setStore = function (store) {\n        this._store = store;\n        var storeServable = this.storeToObservable(store);\n        this._store$.next(storeServable);\n    };\n    return RootStore;\n}(ng_redux_1.NgRedux));\nexports.RootStore = RootStore;\n//# sourceMappingURL=root-store.js.map"]},"metadata":{},"sourceType":"script"}