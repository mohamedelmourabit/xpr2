// Default colors
export const DefaultColors = [
    [63, 81, 181],
    [0, 150, 136],
    [255, 152, 0],
    [233, 30, 99],
    [156, 39, 176],
    [0, 188, 212],
    [3, 169, 244],
    [96, 125, 139],
    [255, 193, 7],
    [37, 155, 36],
    [205, 220, 57],
    [86, 119, 252] // Blue
];
export function rgba(colour, alpha) {
    return 'rgba(' + colour.concat(alpha).join(',') + ')';
}
export function getRandomInt(min, max) {
    return Math.floor(Math.random() * (max - min + 1)) + min;
}
export function formatLineColor(colors) {
    return {
        backgroundColor: rgba(colors, 0.35),
        borderColor: rgba(colors, 1),
        pointBackgroundColor: rgba(colors, 1),
        pointBorderColor: '#fff',
        pointHoverBackgroundColor: '#fff',
        pointHoverBorderColor: rgba(colors, 0.95)
    };
}
export function formatBarColor(colors) {
    return {
        backgroundColor: rgba(colors, 0.75),
        borderColor: rgba(colors, 1),
        hoverBackgroundColor: rgba(colors, 1),
        hoverBorderColor: rgba(colors, 1)
    };
}
export function formatPieColors(colors) {
    return {
        backgroundColor: colors.map((color) => rgba(color, 0.76)),
        borderColor: colors.map(() => '#fff'),
        pointBackgroundColor: colors.map((color) => rgba(color, 1)),
        pointBorderColor: colors.map(() => '#fff'),
        pointHoverBackgroundColor: colors.map((color) => rgba(color, 1)),
        pointHoverBorderColor: colors.map((color) => rgba(color, 1))
    };
}
export function formatPolarAreaColors(colors) {
    return {
        backgroundColor: colors.map((color) => rgba(color, 0.75)),
        borderColor: colors.map((color) => rgba(color, 1)),
        hoverBackgroundColor: colors.map((color) => rgba(color, 1)),
        hoverBorderColor: colors.map((color) => rgba(color, 1))
    };
}
export function getRandomColor() {
    return [getRandomInt(0, 255), getRandomInt(0, 255), getRandomInt(0, 255)];
}
/**
* @method Generate colors for line|bar charts
* @param index he index of the default color array. eg. 0, 1
* @return number[]
* @author vincent 2019-01-22
* @version 0.0.0
* @example
* @log 1. vincent,2019-01-22,done
*/
export function generateColor(index) {
    return DefaultColors[index] || getRandomColor();
}
/**
* @method Generate colors for pie|doughnut charts
* @param count Length of data. eg. datasets.data.length
* @return number[][]
* @author vincent 2019-01-22
* @version 0.0.0
* @example
* @log 1. vincent,2019-01-22,done
*/
export function generateColors(count) {
    const colorsArr = new Array(count);
    for (let i = 0; i < count; i++) {
        colorsArr[i] = DefaultColors[i] || getRandomColor();
    }
    return colorsArr;
}
/**
* @method Generate colors by chart type
* @param chartType The type of chart you are using. eg. line,bar
* @param index The index of the default color array. eg. DefaultColors[index]
* @param count Length of data. eg. datasets.data.length
* @return Color or number[]
* @author vincent 2019-01-22
* @version 0.0.0
* @example
* @log 1. vincent,2019-01-22,done
*/
export function getColors(chartType, index, count) {
    if (chartType === 'pie' ||
        chartType === 'doughnut' ||
        chartType === 'bubble' ||
        chartType === 'scatter') {
        return formatPieColors(generateColors(count));
    }
    if (chartType === 'polarArea') {
        return formatPolarAreaColors(generateColors(count));
    }
    if (chartType === 'line' || chartType === 'radar') {
        return formatLineColor(generateColor(index));
    }
    if (chartType === 'bar' || chartType === 'horizontalBar') {
        return formatBarColor(generateColor(index));
    }
    return generateColor(index);
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29sb3JzLmpzIiwic291cmNlUm9vdCI6Im5nOi8vbmctY2hhcnRqcy8iLCJzb3VyY2VzIjpbImxpYi9jb2xvcnMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBMkJBLGlCQUFpQjtBQUNqQixNQUFNLENBQUMsTUFBTSxhQUFhLEdBQWU7SUFDckMsQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLEdBQUcsQ0FBQztJQUNiLENBQUMsQ0FBQyxFQUFFLEdBQUcsRUFBRSxHQUFHLENBQUM7SUFDYixDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDO0lBQ2IsQ0FBQyxHQUFHLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQztJQUNiLENBQUMsR0FBRyxFQUFFLEVBQUUsRUFBRSxHQUFHLENBQUM7SUFDZCxDQUFDLENBQUMsRUFBRSxHQUFHLEVBQUUsR0FBRyxDQUFDO0lBQ2IsQ0FBQyxDQUFDLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQztJQUNiLENBQUMsRUFBRSxFQUFFLEdBQUcsRUFBRSxHQUFHLENBQUM7SUFDZCxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDO0lBQ2IsQ0FBQyxFQUFFLEVBQUUsR0FBRyxFQUFFLEVBQUUsQ0FBQztJQUNiLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxFQUFFLENBQUM7SUFDZCxDQUFDLEVBQUUsRUFBRSxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQU8sT0FBTztDQUMvQixDQUFDO0FBUUYsTUFBTSxVQUFVLElBQUksQ0FBQyxNQUFnQixFQUFFLEtBQWE7SUFDaEQsT0FBTyxPQUFPLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsR0FBRyxDQUFDO0FBQzFELENBQUM7QUFFRCxNQUFNLFVBQVUsWUFBWSxDQUFDLEdBQVcsRUFBRSxHQUFXO0lBQ2pELE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLEdBQUcs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O0tBQy9DO0lBRUQsT0FBTyxhQUFhLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDaEMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBpbnRlcmZhY2UgQ29sb3Ige1xuICAgIGJhY2tncm91bmRDb2xvcj86IHN0cmluZyB8IHN0cmluZ1tdO1xuICAgIGJvcmRlcldpZHRoPzogbnVtYmVyIHwgbnVtYmVyW107XG4gICAgYm9yZGVyQ29sb3I/OiBzdHJpbmcgfCBzdHJpbmdbXTtcbiAgICBib3JkZXJDYXBTdHlsZT86IHN0cmluZztcbiAgICBib3JkZXJEYXNoPzogbnVtYmVyW107XG4gICAgYm9yZGVyRGFzaE9mZnNldD86IG51bWJlcjtcbiAgICBib3JkZXJKb2luU3R5bGU/OiBzdHJpbmc7XG5cbiAgICBwb2ludEJvcmRlckNvbG9yPzogc3RyaW5nIHwgc3RyaW5nW107XG4gICAgcG9pbnRCYWNrZ3JvdW5kQ29sb3I/OiBzdHJpbmcgfCBzdHJpbmdbXTtcbiAgICBwb2ludEJvcmRlcldpZHRoPzogbnVtYmVyIHwgbnVtYmVyW107XG5cbiAgICBwb2ludFJhZGl1cz86IG51bWJlciB8IG51bWJlcltdO1xuICAgIHBvaW50SG92ZXJSYWRpdXM/OiBudW1iZXIgfCBudW1iZXJbXTtcbiAgICBwb2ludEhpdFJhZGl1cz86IG51bWJlciB8IG51bWJlcltdO1xuXG4gICAgcG9pbnRIb3ZlckJhY2tncm91bmRDb2xvcj86IHN0cmluZyB8IHN0cmluZ1tdO1xuICAgIHBvaW50SG92ZXJCb3JkZXJDb2xvcj86IHN0cmluZyB8IHN0cmluZ1tdO1xuICAgIHBvaW50SG92ZXJCb3JkZXJXaWR0aD86IG51bWJlciB8IG51bWJlcltdO1xuICAgIHBvaW50U3R5bGU/OiBzdHJpbmcgfCBzdHJpbmdbXTtcblxuICAgIGhvdmVyQmFja2dyb3VuZENvbG9yPzogc3RyaW5nIHwgc3RyaW5nW107XG4gICAgaG92ZXJCb3JkZXJDb2xvcj86IHN0cmluZyB8IHN0cmluZ1tdO1xuICAgIGhvdmVyQm9yZGVyV2lkdGg/OiBudW1iZXI7XG59XG5cbi8vIERlZmF1bHQgY29sb3JzXG5leHBvcnQgY29uc3QgRGVmYXVsdENvbG9yczogbnVtYmVyW11bXSA9IFtcbiAgICBbNjMsIDgxLCAxODFdLCAgICAgICAvLyBJbmRvZ29cbiAgICBbMCwgMTUwLCAxMzZdLCAgICAgICAvLyBUZWFsXG4gICAgWzI1NSwgMTUyLCAwXSwgICAgICAgLy8gT3JhbmdlXG4gICAgWzIzMywgMzAsIDk5XSwgICAgICAgLy8gUGlua1xuICAgIFsxNTYsIDM5LCAxNzZdLCAgICAgIC8vIFB1cnBsZVxuICAgIFswLCAxODgsIDIxMl0sICAgICAgIC8vIEN5YW5cbiAgICBbMywgMTY5LCAyNDRdLCAgICAgICAvLyBMaWdodCBCbHVlXG4gICAgWzk2LCAxMjUsIDEzOV0sICAgICAgLy8gQmx1ZSBHcmV5XG4gICAgWzI1NSwgMTkzLCA3XSwgICAgICAgLy8gQW1iZXJcbiAgICBbMzcsIDE1NSwgMzZdLCAgICAgICAvLyBHcmVlblxuICAgIFsyMDUsIDIyMCwgNTddLCAgICAgIC8vIExpbWVcbiAgICBbODYsIDExOSwgMjUyXSAgICAgICAvLyBCbHVlXG5dO1xuXG4vLyBwaWUgfCBkb3VnaG51dFxuZXhwb3J0IGludGVyZmFjZSBDb2xvcnMgZXh0ZW5kcyBDb2xvciB7XG4gICAgZGF0YT86IG51bWJlcltdO1xuICAgIGxhYmVsPzogc3RyaW5nO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmdiYShjb2xvdXI6IG51bWJlcltdLCBhbHBoYTogbnVtYmVyKTogc3RyaW5nIHtcbiAgICByZXR1cm4gJ3JnYmEoJyArIGNvbG91ci5jb25jYXQoYWxwaGEpLmpvaW4oJywnKSArICcpJztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFJhbmRvbUludChtaW46IG51bWJlciwgbWF4OiBudW1iZXIpOiBudW1iZXIge1xuICAgIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAobWF4IC0gbWluICsgMSkpICsgbWluO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0TGluZUNvbG9yKGNvbG9yczogbnVtYmVyW10pOiBDb2xvciB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiByZ2JhKGNvbG9ycywgMC4zNSksXG4gICAgICAgIGJvcmRlckNvbG9yOiByZ2JhKGNvbG9ycywgMSksXG4gICAgICAgIHBvaW50QmFja2dyb3VuZENvbG9yOiByZ2JhKGNvbG9ycywgMSksXG4gICAgICAgIHBvaW50Qm9yZGVyQ29sb3I6ICcjZmZmJyxcbiAgICAgICAgcG9pbnRIb3ZlckJhY2tncm91bmRDb2xvcjogJyNmZmYnLFxuICAgICAgICBwb2ludEhvdmVyQm9yZGVyQ29sb3I6IHJnYmEoY29sb3JzLCAwLjk1KVxuICAgIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXRCYXJDb2xvcihjb2xvcnM6IG51bWJlcltdKTogQ29sb3Ige1xuICAgIHJldHVybiB7XG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogcmdiYShjb2xvcnMsIDAuNzUpLFxuICAgICAgICBib3JkZXJDb2xvcjogcmdiYShjb2xvcnMsIDEpLFxuICAgICAgICBob3ZlckJhY2tncm91bmRDb2xvcjogcmdiYShjb2xvcnMsIDEpLFxuICAgICAgICBob3ZlckJvcmRlckNvbG9yOiByZ2JhKGNvbG9ycywgMSlcbiAgICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0UGllQ29sb3JzKGNvbG9yczogbnVtYmVyW11bXSk6IENvbG9ycyB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiBjb2xvcnMubWFwKChjb2xvcjogbnVtYmVyW10pID0+IHJnYmEoY29sb3IsIDAuNzYpKSxcbiAgICAgICAgYm9yZGVyQ29sb3I6IGNvbG9ycy5tYXAoKCkgPT4gJyNmZmYnKSxcbiAgICAgICAgcG9pbnRCYWNrZ3JvdW5kQ29sb3I6IGNvbG9ycy5tYXAoKGNvbG9yOiBudW1iZXJbXSkgPT4gcmdiYShjb2xvciwgMSkpLFxuICAgICAgICBwb2ludEJvcmRlckNvbG9yOiBjb2xvcnMubWFwKCgpID0+ICcjZmZmJyksXG4gICAgICAgIHBvaW50SG92ZXJCYWNrZ3JvdW5kQ29sb3I6IGNvbG9ycy5tYXAoKGNvbG9yOiBudW1iZXJbXSkgPT4gcmdiYShjb2xvciwgMSkpLFxuICAgICAgICBwb2ludEhvdmVyQm9yZGVyQ29sb3I6IGNvbG9ycy5tYXAoKGNvbG9yOiBudW1iZXJbXSkgPT4gcmdiYShjb2xvciwgMSkpXG4gICAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdFBvbGFyQXJlYUNvbG9ycyhjb2xvcnM6IG51bWJlcltdW10pOiBDb2xvciB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiBjb2xvcnMubWFwKChjb2xvcjogbnVtYmVyW10pID0+IHJnYmEoY29sb3IsIDAuNzUpKSxcbiAgICAgICAgYm9yZGVyQ29sb3I6IGNvbG9ycy5tYXAoKGNvbG9yOiBudW1iZXJbXSkgPT4gcmdiYShjb2xvciwgMSkpLFxuICAgICAgICBob3ZlckJhY2tncm91bmRDb2xvcjogY29sb3JzLm1hcCgoY29sb3I6IG51bWJlcltdKSA9PiByZ2JhKGNvbG9yLCAxKSksXG4gICAgICAgIGhvdmVyQm9yZGVyQ29sb3I6IGNvbG9ycy5tYXAoKGNvbG9yOiBudW1iZXJbXSkgPT4gcmdiYShjb2xvciwgMSkpXG4gICAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFJhbmRvbUNvbG9yKCk6IG51bWJlcltdIHtcbiAgICByZXR1cm4gW2dldFJhbmRvbUludCgwLCAyNTUpLCBnZXRSYW5kb21JbnQoMCwgMjU1KSwgZ2V0UmFuZG9tSW50KDAsIDI1NSldO1xufVxuXG5cbi8qKlxuKiBAbWV0aG9kIEdlbmVyYXRlIGNvbG9ycyBmb3IgbGluZXxiYXIgY2hhcnRzXG4qIEBwYXJhbSBpbmRleCBoZSBpbmRleCBvZiB0aGUgZGVmYXVsdCBjb2xvciBhcnJheS4gZWcuIDAsIDFcbiogQHJldHVybiBudW1iZXJbXVxuKiBAYXV0aG9yIHZpbmNlbnQgMjAxOS0wMS0yMlxuKiBAdmVyc2lvbiAwLjAuMFxuKiBAZXhhbXBsZVxuKiBAbG9nIDEuIHZpbmNlbnQsMjAxOS0wMS0yMixkb25lXG4qL1xuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlQ29sb3IoaW5kZXg6IG51bWJlcik6IG51bWJlcltdIHtcbiAgICByZXR1cm4gRGVmYXVsdENvbG9yc1tpbmRleF0gfHwgZ2V0UmFuZG9tQ29sb3IoKTtcbn1cblxuXG4vKipcbiogQG1ldGhvZCBHZW5lcmF0ZSBjb2xvcnMgZm9yIHBpZXxkb3VnaG51dCBjaGFydHNcbiogQHBhcmFtIGNvdW50IExlbmd0aCBvZiBkYXRhLiBlZy4gZGF0YXNldHMuZGF0YS5sZW5ndGhcbiogQHJldHVybiBudW1iZXJbXVtdXG4qIEBhdXRob3IgdmluY2VudCAyMDE5LTAxLTIyXG4qIEB2ZXJzaW9uIDAuMC4wXG4qIEBleGFtcGxlXG4qIEBsb2cgMS4gdmluY2VudCwyMDE5LTAxLTIyLGRvbmVcbiovXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVDb2xvcnMoY291bnQ6IG51bWJlcik6IG51bWJlcltdW10ge1xuICAgIGNvbnN0IGNvbG9yc0FycjogbnVtYmVyW11bXSA9IG5ldyBBcnJheShjb3VudCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb3VudDsgaSsrKSB7XG4gICAgICAgIGNvbG9yc0FycltpXSA9IERlZmF1bHRDb2xvcnNbaV0gfHwgZ2V0UmFuZG9tQ29sb3IoKTtcbiAgICB9XG4gICAgcmV0dXJuIGNvbG9yc0Fycjtcbn1cblxuXG4vKipcbiogQG1ldGhvZCBHZW5lcmF0ZSBjb2xvcnMgYnkgY2hhcnQgdHlwZVxuKiBAcGFyYW0gY2hhcnRUeXBlIFRoZSB0eXBlIG9mIGNoYXJ0IHlvdSBhcmUgdXNpbmcuIGVnLiBsaW5lLGJhclxuKiBAcGFyYW0gaW5kZXggVGhlIGluZGV4IG9mIHRoZSBkZWZhdWx0IGNvbG9yIGFycmF5LiBlZy4gRGVmYXVsdENvbG9yc1tpbmRleF1cbiogQHBhcmFtIGNvdW50IExlbmd0aCBvZiBkYXRhLiBlZy4gZGF0YXNldHMuZGF0YS5sZW5ndGhcbiogQHJldHVybiBDb2xvciBvciBudW1iZXJbXVxuKiBAYXV0aG9yIHZpbmNlbnQgMjAxOS0wMS0yMlxuKiBAdmVyc2lvbiAwLjAuMFxuKiBAZXhhbXBsZVxuKiBAbG9nIDEuIHZpbmNlbnQsMjAxOS0wMS0yMixkb25lXG4qL1xuZXhwb3J0IGZ1bmN0aW9uIGdldENvbG9ycyhjaGFydFR5cGU6IHN0cmluZywgaW5kZXg6IG51bWJlciwgY291bnQ6IG51bWJlcik6IENvbG9yIHwgbnVtYmVyW10ge1xuICAgIGlmIChjaGFydFR5cGUgPT09ICdwaWUnIHx8XG4gICAgICAgIGNoYXJ0VHlwZSA9PT0gJ2RvdWdobnV0JyB8fFxuICAgICAgICBjaGFydFR5cGUgPT09ICdidWJibGUnIHx8XG4gICAgICAgIGNoYXJ0VHlwZSA9PT0gJ3NjYXR0ZXInKSB7XG4gICAgICAgIHJldHVybiBmb3JtYXRQaWVDb2xvcnMoZ2VuZXJhdGVDb2xvcnMoY291bnQpKTtcbiAgICB9XG5cbiAgICBpZiAoY2hhcnRUeXBlID09PSAncG9sYXJBcmVhJykge1xuICAgICAgICByZXR1cm4gZm9ybWF0UG9sYXJBcmVhQ29sb3JzKGdlbmVyYXRlQ29sb3JzKGNvdW50KSk7XG4gICAgfVxuXG4gICAgaWYgKGNoYXJ0VHlwZSA9PT0gJ2xpbmUnIHx8IGNoYXJ0VHlwZSA9PT0gJ3JhZGFyJykge1xuICAgICAgICByZXR1cm4gZm9ybWF0TGluZUNvbG9yKGdlbmVyYXRlQ29sb3IoaW5kZXgpKTtcbiAgICB9XG5cbiAgICBpZiAoY2hhcnRUeXBlID09PSAnYmFyJyB8fCBjaGFydFR5cGUgPT09ICdob3Jpem9udGFsQmFyJykge1xuICAgICAgICByZXR1cm4gZm9ybWF0QmFyQ29sb3IoZ2VuZXJhdGVDb2xvcihpbmRleCkpO1xuICAgIH1cblxuICAgIHJldHVybiBnZW5lcmF0ZUNvbG9yKGluZGV4KTtcbn1cbiJdfQ==