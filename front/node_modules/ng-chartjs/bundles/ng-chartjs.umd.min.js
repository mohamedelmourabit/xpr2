!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("chart.js")):"function"==typeof define&&define.amd?define("ng-chartjs",["exports","@angular/core","chart.js"],e):e((t=t||self)["ng-chartjs"]={},t.ng.core,t.chart_js)}(this,(function(t,e,r){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */function n(t,e,r,n){var o,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(e,r,i):o(e,r))||i);return a>3&&i&&Object.defineProperty(e,r,i),i}function o(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}var a=function(){function t(){this._chartInstances=[],this._chartId=[]}return t.prototype.addChart=function(t,e){for(var r=0;r<this._chartId.length;r++)if(t===this._chartId[r])return;this._chartId.push(t),this._chartInstances.push(e)},t.prototype.removeChart=function(t){for(var e=0;e<this._chartId.length;e++)t===this._chartId[e]&&(this._chartId.splice(e,1),this._chartInstances.splice(e,1))},t.prototype.getChart=function(t){for(var e=0;e<this._chartId.length;e++)if(t===this._chartId[e])return this._chartInstances[e];return null},t.ɵprov=e["ɵɵdefineInjectable"]({factory:function(){return new t},token:t,providedIn:"root"}),t=n([e.Injectable({providedIn:"root"})],t)}(),i=function(){function t(){this.plugins=[]}return t.ɵprov=e["ɵɵdefineInjectable"]({factory:function(){return new t},token:t,providedIn:"root"}),t=n([e.Injectable({providedIn:"root"})],t)}(),s=function(){function t(t,e){this.storeService=t,this.pluginConfig=e;var n=e.plugins;if(0!==n.length||n)for(var o=0;o<n.length;o++)n[o]&&r.plugins.register(n[o])}return t.prototype.getChart=function(t){return this.storeService.getChart(t)},t.ctorParameters=function(){return[{type:a},{type:i}]},t.ɵprov=e["ɵɵdefineInjectable"]({factory:function(){return new t(e["ɵɵinject"](a),e["ɵɵinject"](i))},token:t,providedIn:"root"}),t=n([e.Injectable({providedIn:"root"}),o("design:paramtypes",[a,i])],t)}(),h=[[63,81,181],[0,150,136],[255,152,0],[233,30,99],[156,39,176],[0,188,212],[3,169,244],[96,125,139],[255,193,7],[37,155,36],[205,220,57],[86,119,252]];function c(t,e){return"rgba("+t.concat(e).join(",")+")"}function d(t,e){return Math.floor(Math.random()*(e-t+1))+t}function u(t){return{backgroundColor:c(t,.35),borderColor:c(t,1),pointBackgroundColor:c(t,1),pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:c(t,.95)}}function p(t){return{backgroundColor:c(t,.75),borderColor:c(t,1),hoverBackgroundColor:c(t,1),hoverBorderColor:c(t,1)}}function l(t){return{backgroundColor:t.map((function(t){return c(t,.76)})),borderColor:t.map((function(){return"#fff"})),pointBackgroundColor:t.map((function(t){return c(t,1)})),pointBorderColor:t.map((function(){return"#fff"})),pointHoverBackgroundColor:t.map((function(t){return c(t,1)})),pointHoverBorderColor:t.map((function(t){return c(t,1)}))}}function f(t){return{backgroundColor:t.map((function(t){return c(t,.75)})),borderColor:t.map((function(t){return c(t,1)})),hoverBackgroundColor:t.map((function(t){return c(t,1)})),hoverBorderColor:t.map((function(t){return c(t,1)}))}}function g(){return[d(0,255),d(0,255),d(0,255)]}function v(t){return h[t]||g()}function y(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=h[r]||g();return e}function C(t,e,r){return"pie"===t||"doughnut"===t||"bubble"===t||"scatter"===t?l(y(r)):"polarArea"===t?f(y(r)):"line"===t||"radar"===t?u(v(e)):"bar"===t||"horizontalBar"===t?p(v(e)):v(e)}var m=function(){function t(t,r,n,o){this.ngChartjsService=r,this.storeService=n,this.zone=o,this.labels=[],this.options={},this.noZone=!0,this.id=null,this.chartClick=new e.EventEmitter,this.chartHover=new e.EventEmitter,this.initFlag=!1,this.hasChanges=!1,this.element=t}return t.prototype.ngOnInit=function(){var t=this;this.ctx=this.element.nativeElement.getContext("2d"),this.initFlag=!0,(this.data||this.datasets)&&(this.noZone?this.zone.runOutsideAngular((function(){t.refresh()})):this.refresh())},t.prototype.ngOnChanges=function(t){this.initFlag&&((t.hasOwnProperty("data")||t.hasOwnProperty("datasets"))&&(t.data?this.updateChartData(t.data.currentValue):this.updateChartData(t.datasets.currentValue),this.hasChanges=!0),t.hasOwnProperty("labels")&&(this.chart.data.labels=t.labels.currentValue,this.hasChanges=!0),t.hasOwnProperty("legend")&&t.legend.currentValue!==t.legend.previousValue&&(this.chart.options.legend.display=t.legend.currentValue,this.hasChanges=!0),t.hasOwnProperty("adding")&&(this.addData_(t.adding.currentValue.labels,t.adding.currentValue.data),this.hasChanges=!0),t.hasOwnProperty("removing")&&("oldest"!==t.removing.currentValue.orientation&&"latest"!==t.removing.currentValue.orientation||(this.removeData_(t.removing.currentValue.orientation),this.hasChanges=!0)),t.hasOwnProperty("chartType")&&this.refresh(),t.hasOwnProperty("resetOption")&&(Object.assign(this.chart.options,t.resetOption.currentValue),this.hasChanges=!0),this.hasChanges&&(this.chart.update(),this.hasChanges=!1),t.hasOwnProperty("id")&&(this.removeChart(t.id.previousValue),this.addChart(t.id.currentValue)))},t.prototype.ngOnDestroy=function(){this.chart&&(this.chart.destroy(),this.chart=void 0,this.removeChart(this.id))},t.prototype.update=function(){this.chart.update()},t.prototype.addData=function(t,e){this.addData_(t,e),this.update()},t.prototype.removeData=function(t){this.removeData_(t),this.update()},t.prototype.refresh=function(){this.ngOnDestroy(),this.chart=this.getChartBuilder(this.ctx),this.addChart(this.id)},t.prototype.removeChart=function(t){this.element.nativeElement.hasAttribute("id")?this.storeService.removeChart(this.element.nativeElement.id):null!=t&&this.storeService.removeChart(t)},t.prototype.addChart=function(t){this.element.nativeElement.hasAttribute("id")?this.storeService.addChart(this.element.nativeElement.id,this.chart):null!=t&&this.storeService.addChart(t,this.chart)},t.prototype.updateChartData=function(t){Array.isArray(t[0].data)?this.chart.data.datasets.forEach((function(e,r){e.data=t[r].data,t[r].label&&(e.label=t[r].label)})):this.chart.data.datasets[0].data=t,this.chart.data.datasets=this.updateColors(this.chart.data.datasets)},t.prototype.getChartBuilder=function(t){var e=this,n=this.getDatasets(),o=Object.assign({},this.options);!1===this.legend&&(o.legend={display:!1}),o.hover=o.hover||{},o.hover.onHover||(o.hover.onHover=function(t,r){r&&!r.length||e.chartHover.emit({event:t,active:r})}),o.onClick||(o.onClick=function(t,r){e.chartClick.emit({event:t,active:r})});var a={type:this.chartType,data:{labels:this.labels,datasets:n},options:o,plugins:this.inlinePlugins};return new r(t,a)},t.prototype.getDatasets=function(){var t=this,e=void 0;if((!this.datasets||!this.datasets.length&&this.data&&this.data.length)&&(e=Array.isArray(this.data[0])?this.data.map((function(e,r){return{data:e,label:t.labels[r]||"Label "+r}})):[{data:this.data,label:"Label 0"}]),!(e=this.updateColors(e)))throw new Error("ng-chartjs configuration error,\n      data or datasets field are required to render char "+this.chartType);return e},t.prototype.updateColors=function(t){var e=this;return(this.datasets&&this.datasets.length||t&&t.length)&&(t=(this.datasets||t).map((function(t,r){var n=Object.assign({},t);return e.colors&&e.colors.length?Object.assign(n,e.colors[r]):Object.assign(n,C(e.chartType,r,n.data.length)),n}))),t},t.prototype.addData_=function(t,e){var r=this;0!==t.length&&0!==e.length&&(t.forEach((function(t){r.chart.data.labels.push(t)})),this.chart.data.datasets.forEach((function(t,r){if(e[r])for(var n=0;n<e[r].length;n++)t.data.push(e[r][n]);else console.log("The added data does not match the original data")})))},t.prototype.removeData_=function(t){"latest"===t?(this.chart.data.labels.pop(),this.chart.data.datasets.forEach((function(t){t.data.pop()}))):"oldest"===t&&(this.chart.data.labels.shift(),this.chart.data.datasets.forEach((function(t){t.data.shift()})))},t.ctorParameters=function(){return[{type:e.ElementRef},{type:s},{type:a},{type:e.NgZone}]},n([e.Input(),o("design:type",Array)],t.prototype,"data",void 0),n([e.Input(),o("design:type",Array)],t.prototype,"datasets",void 0),n([e.Input(),o("design:type",Array)],t.prototype,"labels",void 0),n([e.Input(),o("design:type",Object)],t.prototype,"options",void 0),n([e.Input(),o("design:type",Array)],t.prototype,"inlinePlugins",void 0),n([e.Input(),o("design:type",String)],t.prototype,"chartType",void 0),n([e.Input(),o("design:type",Array)],t.prototype,"colors",void 0),n([e.Input(),o("design:type",Boolean)],t.prototype,"legend",void 0),n([e.Input(),o("design:type",Object)],t.prototype,"adding",void 0),n([e.Input(),o("design:type",Object)],t.prototype,"removing",void 0),n([e.Input(),o("design:type",String)],t.prototype,"resetOption",void 0),n([e.Input(),o("design:type",Object)],t.prototype,"noZone",void 0),n([e.Input(),o("design:type",String)],t.prototype,"id",void 0),n([e.Output(),o("design:type",e.EventEmitter)],t.prototype,"chartClick",void 0),n([e.Output(),o("design:type",e.EventEmitter)],t.prototype,"chartHover",void 0),t=n([e.Directive({selector:"canvas[ngChartjs]",exportAs:"ngChartjs"}),o("design:paramtypes",[e.ElementRef,s,a,e.NgZone])],t)}(),b=new e.InjectionToken("[ngx-chart-js] Global Default Plugin");function I(t){var e=new i;return e.plugins=t,e}var j=function(){function t(){}var r;return r=t,t.registerPlugin=function(t){return void 0===t&&(t=[]),{ngModule:r,providers:[{provide:b,useValue:t},{deps:[b],provide:i,useFactory:I}]}},t=r=n([e.NgModule({imports:[],declarations:[m],exports:[m],providers:[s]})],t)}();t.DefaultColors=h,t.NgChartjsDirective=m,t.NgChartjsModule=j,t.NgChartjsService=s,t.formatBarColor=p,t.formatLineColor=u,t.formatPieColors=l,t.formatPolarAreaColors=f,t.generateColor=v,t.generateColors=y,t.getColors=C,t.getRandomColor=g,t.getRandomInt=d,t.ngChartjsCustomPluginsFactory=I,t.rgba=c,t.ɵa=a,t.ɵb=i,t.ɵc=b,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=ng-chartjs.umd.min.js.map